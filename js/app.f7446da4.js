(function(e){function r(r){for(var t,i,s=r[0],u=r[1],c=r[2],l=0,b=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&b.push(n[i][0]),n[i]=0;for(t in u)Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t]);d&&d(r);while(b.length)b.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,r=0;r<o.length;r++){for(var a=o[r],t=!0,s=1;s<a.length;s++){var u=a[s];0!==n[u]&&(t=!1)}t&&(o.splice(r--,1),e=i(i.s=a[0]))}return e}var t={},n={app:0},o=[];function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,r,a){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)i.d(a,t,function(r){return e[r]}.bind(null,t));return a},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="./";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=r,s=s.slice();for(var c=0;c<s.length;c++)r(s[c]);var d=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,r,a){e.exports=a("56d7")},1:function(e,r){},10:function(e,r){},11:function(e,r){},12:function(e,r){},13:function(e,r){},14:function(e,r){},2:function(e,r){},3:function(e,r){},4:function(e,r){},5:function(e,r){},"56d7":function(e,r,a){"use strict";a.r(r);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4"),a("d3b7");var t=a("2b0e"),n=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",[a("b-navbar",{attrs:{type:"is-warning"},scopedSlots:e._u([{key:"brand",fn:function(){return[a("b-navbar-item",[e._v("Deudas")])]},proxy:!0},{key:"start",fn:function(){return[a("b-navbar-item",{directives:[{name:"show",rawName:"v-show",value:e.usuarioAutenticado.nombre,expression:"usuarioAutenticado.nombre"}],attrs:{tag:"router-link",to:{name:"Usuarios"}}},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"account-supervisor"}}),e._v("Usuarios ")],1),a("b-navbar-item",{directives:[{name:"show",rawName:"v-show",value:e.usuarioAutenticado.nombre,expression:"usuarioAutenticado.nombre"}],attrs:{tag:"router-link",to:{name:"ListaDeDeudas"}}},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"currency-usd"}}),e._v("Deudas ")],1),a("b-navbar-item",{directives:[{name:"show",rawName:"v-show",value:e.usuarioAutenticado.nombre,expression:"usuarioAutenticado.nombre"}],attrs:{tag:"router-link",to:{name:"AcercaDe"}}},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"information"}}),e._v("Acerca de ")],1)]},proxy:!0},{key:"end",fn:function(){return[a("a",{directives:[{name:"show",rawName:"v-show",value:e.usuarioAutenticado.nombre,expression:"usuarioAutenticado.nombre"}],staticClass:"navbar-item",on:{click:function(r){return e.cerrarSesion()}}},[e._v(" Hola  "),a("strong",[e._v(e._s(e.usuarioAutenticado.nombre))]),e._v(". ¿Cerrar sesión? ")])]},proxy:!0}])}),a("section",{staticClass:"section"},[a("router-view")],1),a("footer",{staticClass:"footer"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("strong",[e._v("Control de deudas ")]),a("b-icon",{attrs:{icon:"code-tags"}}),e._v(" con "),a("b-icon",{attrs:{icon:"heart",type:"is-danger"}}),e._v(" por "),a("a",{attrs:{href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")])],1)])])],1)},o=[],i=a("1da1"),s=(a("96cf"),a("e9c4"),a("25f0"),a("260b")),u=a("66ce"),c=a("e71f"),d=a("aced"),l=!1,b="usuario_autenticado",f={guardarUsuarioAutenticado:function(e){localStorage.setItem(b,JSON.stringify(e))},obtenerUsuarioAutenticado:function(){return JSON.parse(localStorage.getItem(b))},obtener:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r={apiKey:"AIzaSyB5BU8Hg-pQnLrz1sp5M-NH6s8k-dVBCYY",authDomain:"deudas-8d629.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyB5BU8Hg-pQnLrz1sp5M-NH6s8k-dVBCYY",VUE_APP_FIREBASE_APP_ID:"1:969590407940:web:ce8291cad999008905c651",VUE_APP_FIREBASE_AUTH_DOMAIN:"deudas-8d629.firebaseapp.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"969590407940",VUE_APP_FIREBASE_PROJECT_ID:"deudas-8d629",VUE_APP_FIREBASE_STORAGE_BUCKET:"deudas-8d629.appspot.com",BASE_URL:"./"}).VUE_APP_FIREBASE_DATABASE_URL,projectId:"deudas-8d629",storageBucket:"deudas-8d629.appspot.com",messagingSenderId:"969590407940",appId:"1:969590407940:web:ce8291cad999008905c651"},a=Object(s["a"])(r),t=Object(c["h"])(a),!l){e.next=5;break}return e.abrupt("return",t);case 5:return e.prev=5,e.next=8,Object(c["e"])(t);case 8:d["a"].open({message:"Modo fuera de línea habilitado correctamente",type:"is-success"}),l=!0,e.next=19;break;case 12:e.prev=12,e.t0=e["catch"](5),console.log({err:e.t0}),n="","failed-precondition"==e.t0.code?n="Error: recuerda no tener varias pestañas abiertas con la app":"unimplemented"==e.t0.code&&(n="Error: el navegador que usas no soporta el modo fuera de línea. Cambia de navegador"),n+=" "+e.t0.toString(),d["a"].open({message:n,type:"is-danger"});case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));function r(){return e.apply(this,arguments)}return r}(),obtenerColeccionUsuarios:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=c["b"],e.next=3,f.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"usuarios"));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),obtenerUsuarios:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=c["g"],e.next=3,f.obtenerColeccionUsuarios();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},obtenerColeccionDeudas:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=c["b"],e.next=3,f.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"deudas"));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),obtenerReferenciaListaUsuarios:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=u["a"],e.next=3,f.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"usuarios"));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),obtenerReferenciaListaDeudas:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=u["a"],e.next=3,f.obtener();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"deudas"));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()},p=f,m=new t["a"]({}),v={data:function(){return{usuarioAutenticado:{}}},methods:{cerrarSesion:function(){p.guardarUsuarioAutenticado(null),this.usuarioAutenticado={},this.$router.push({name:"Login"})}},beforeMount:function(){var e=this;m.$on("usuarioAutenticado",(function(r){e.usuarioAutenticado=r}));var r=p.obtenerUsuarioAutenticado();r&&(this.usuarioAutenticado=r)}},h=v,g=a("2877"),_=Object(g["a"])(h,n,o,!1,null,null,null),w=_.exports,y=a("289d"),D=(a("5abe"),a("5363"),a("b0c0"),a("8c4f")),O=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-button",{staticClass:"is-success mb-5",attrs:{loading:e.cargando,"icon-right":"plus"},on:{click:function(r){return e.agregarUsuario()}}},[e._v("Nuevo")]),a("b-table",{attrs:{data:e.usuarios,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[a("b-table-column",{attrs:{searchable:"",field:"nombre",label:"Nombre",sortable:""},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(r.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Opciones"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("b-button",{staticClass:"mb-1",attrs:{type:"is-warning"},on:{click:function(a){return e.editar(r.row)}}},[a("b-icon",{attrs:{icon:"pencil"}})],1),e._v("   "),a("b-button",{staticClass:"mb-1",attrs:{type:"is-danger"},on:{click:function(a){return e.eliminar(r.row,r.index)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}])})],1)],1)])},x=[],S=(a("159b"),a("a434"),{data:function(){return{cargando:!1,usuarios:[],coleccionUsuarios:null}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,p.obtenerColeccionUsuarios();case 2:return e.coleccionUsuarios=r.sent,e.cargando=!0,r.next=6,p.obtenerUsuarios();case 6:a=r.sent,e.usuarios=[],a.forEach((function(r){e.usuarios.push({id:r.id,nombre:r.data().nombre})})),e.cargando=!1;case 10:case"end":return r.stop()}}),r)})))()},methods:{agregarUsuario:function(){this.$router.push({name:"AgregarUsuario"})},editar:function(e){this.$router.push({name:"EditarUsuario",params:{id:e.id}})},eliminar:function(e,r){var a=this;this.$buefy.dialog.confirm({message:"¿Eliminar usuario <strong>".concat(e.nombre,"</strong>?"),cancelText:"Cancelar",confirmText:"Sí, eliminar",onConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.cargando=!0,t.t0=c["c"],t.t1=c["d"],t.next=5,p.obtener();case 5:return t.t2=t.sent,t.t3=e.id,t.t4=(0,t.t1)(t.t2,"usuarios",t.t3),t.next=10,(0,t.t0)(t.t4);case 10:a.cargando=!1,a.usuarios.splice(r,1);case 12:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()})}}}),U=S,k=Object(g["a"])(U,O,x,!1,null,null,null),j=k.exports,A=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("h3",{staticClass:"is-size-3"},[e._v("Agregar usuario")]),a("b-field",{attrs:{label:"Nombre"}},[a("b-input",{attrs:{placeholder:"Escribe el nombre",type:"text"},model:{value:e.nombreUsuario,callback:function(r){e.nombreUsuario=r},expression:"nombreUsuario"}})],1),a("b-field",{attrs:{label:"Contraseña"}},[a("b-input",{attrs:{placeholder:"Escribe tu contraseña",type:"password"},model:{value:e.palabraSecreta,callback:function(r){e.palabraSecreta=r},expression:"palabraSecreta"}})],1),a("b-field",{attrs:{label:"Vuelve a escribir tu contraseña"}},[a("b-input",{attrs:{placeholder:"Confirma tu contraseña",type:"password"},model:{value:e.confirmacionPalabraSecreta,callback:function(r){e.confirmacionPalabraSecreta=r},expression:"confirmacionPalabraSecreta"}})],1),a("b-button",{staticClass:"is-info",attrs:{loading:e.cargando,"icon-left":"arrow-left"},on:{click:function(r){return e.volver()}}},[e._v("Volver")]),e._v("   "),a("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(r){return e.guardar()}}},[e._v("Guardar")])],1)])},E=[],C=a("279c"),R={data:function(){return{referenciaColeccionUsuarios:null,nombreUsuario:"",palabraSecreta:"",confirmacionPalabraSecreta:"",cargando:!1}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,p.obtenerColeccionUsuarios();case 2:e.referenciaColeccionUsuarios=r.sent;case 3:case"end":return r.stop()}}),r)})))()},methods:{volver:function(){this.$router.push({name:"Usuarios"})},guardar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.nombreUsuario&&e.palabraSecreta&&e.confirmacionPalabraSecreta){r.next=2;break}return r.abrupt("return");case 2:if(e.palabraSecreta===e.confirmacionPalabraSecreta){r.next=5;break}return e.$buefy.toast.open("Las contraseñas no coinciden"),r.abrupt("return");case 5:return e.cargando=!0,r.next=8,C.hash(e.palabraSecreta,10);case 8:a=r.sent,Object(c["a"])(e.referenciaColeccionUsuarios,{nombre:e.nombreUsuario,palabraSecreta:a}),e.cargando=!1,e.nombreUsuario="",e.palabraSecreta="",e.confirmacionPalabraSecreta="",e.$buefy.toast.open("Guardado");case 15:case"end":return r.stop()}}),r)})))()}}},P=R,I=Object(g["a"])(P,A,E,!1,null,null,null),$=I.exports,L=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("h3",{staticClass:"is-size-3"},[e._v("Editar usuario")]),a("b-field",{attrs:{label:"Nombre"}},[a("b-input",{attrs:{loading:e.cargando,type:"text"},model:{value:e.nombreUsuario,callback:function(r){e.nombreUsuario=r},expression:"nombreUsuario"}})],1),a("b-button",{staticClass:"is-info",attrs:{loading:e.cargando,"icon-left":"arrow-left"},on:{click:function(r){return e.volver()}}},[e._v("Volver")]),e._v("   "),a("b-button",{attrs:{loading:e.cargando,type:"is-success"},on:{click:function(r){return e.guardar()}}},[e._v("Guardar")])],1)])},N=[],T={data:function(){return{cargando:!1,nombreUsuario:"",id:null,bd:null}},methods:{volver:function(){this.$router.push({name:"Usuarios"})},guardar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object(c["m"])(Object(c["d"])(e.bd,"usuarios",e.id),{nombre:e.nombreUsuario}),e.volver();case 2:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.cargando=!0,a=e.$route.params.id,e.id=a,r.next=5,p.obtener();case 5:return e.bd=r.sent,r.next=8,Object(c["f"])(Object(c["d"])(e.bd,"usuarios",a));case 8:t=r.sent,t.exists()?e.nombreUsuario=t.data().nombre:e.$buefy.toast.open("Error recuperando valor. Tal vez no se ha sincronizado la base de datos"),e.cargando=!1;case 11:case"end":return r.stop()}}),r)})))()}},B=T,z=Object(g["a"])(B,L,N,!1,null,null,null),F=z.exports,M=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("h3",{staticClass:"is-size-3"},[e._v("Agregar deuda")]),a("b-field",{attrs:{message:"La persona que hizo la compra, a la que le van a pagar",label:"Acreedor"}},[a("b-select",{attrs:{loading:e.cargando,placeholder:"Seleccione un usuario"},model:{value:e.acreedor,callback:function(r){e.acreedor=r},expression:"acreedor"}},e._l(e.usuarios,(function(r){return a("option",{key:r.id,attrs:{disabled:e.usuarioAutenticado.id!==r.id},domProps:{value:r}},[e._v(" "+e._s(r.nombre)+" ")])})),0)],1),a("b-field",{attrs:{label:"Descripción"}},[a("b-input",{attrs:{loading:e.cargando,placeholder:"Escribe la descripción"},model:{value:e.descripcion,callback:function(r){e.descripcion=r},expression:"descripcion"}})],1),a("b-field",{attrs:{label:"Monto"}},[a("b-input",{attrs:{loading:e.cargando,type:"number",step:"0.1",placeholder:"Escribe el monto"},model:{value:e.monto,callback:function(r){e.monto=e._n(r)},expression:"monto"}})],1),a("b-field",{attrs:{label:"Deudores (los que pagarán la deuda)"}},e._l(e.deudores,(function(r){return a("b-checkbox",{key:r.id,attrs:{loading:e.cargando,disabled:e.deberiaDeshabilitarUsuario()},model:{value:r.seleccionado,callback:function(a){e.$set(r,"seleccionado",a)},expression:"deudor.seleccionado"}},[e._v(" "+e._s(r.nombre)+" ")])})),1),a("b-button",{staticClass:"is-info",attrs:{loading:e.cargando,"icon-left":"arrow-left"},on:{click:function(r){return e.volver()}}},[e._v("Volver")]),e._v("   "),a("b-button",{attrs:{disabled:e.deberiaDeshabilitarBotonGuardar(),loading:e.cargando,type:"is-success"},on:{click:function(r){return e.guardar()}}},[e._v("Guardar")])],1)])},q=[],V=a("b85c"),G=(a("d81d"),{data:function(){return{acreedor:null,descripcion:"",monto:null,usuarios:[],deudores:[],cargando:!1,referenciaListaDeudas:null,coleccionDeudas:null,usuarioAutenticado:{}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.usuarioAutenticado=p.obtenerUsuarioAutenticado(),r.next=3,p.obtenerColeccionDeudas();case 3:e.coleccionDeudas=r.sent,e.obtenerUsuarios();case 5:case"end":return r.stop()}}),r)})))()},methods:{volver:function(){this.$router.push({name:"ListaDeDeudas"})},guardar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,t,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.acreedor){r.next=2;break}return r.abrupt("return");case 2:a={eliminada:!1,acreedor:e.acreedor.id,idDeudores:e.deudores.filter((function(e){return e.seleccionado})).map((function(e){return e.id})),deudores:e.deudores.filter((function(e){return e.seleccionado})).map((function(e){return{id:e.id,pagado:!1}})),monto:e.monto,descripcion:e.descripcion,fecha:(new Date).getTime()},e.cargando=!0,Object(c["a"])(e.coleccionDeudas,a),e.$buefy.toast.open("Guardada"),e.cargando=!1,e.descripcion="",e.monto=null,e.acreedor=null,t=Object(V["a"])(e.deudores);try{for(t.s();!(n=t.n()).done;)o=n.value,o.seleccionado=!1}catch(i){t.e(i)}finally{t.f()}case 12:case"end":return r.stop()}}),r)})))()},deberiaDeshabilitarBotonGuardar:function(){return!(this.acreedor&&this.monto&&this.descripcion)||!!this.deudores.every((function(e){return!e.seleccionado}))},deberiaDeshabilitarUsuario:function(){return!this.acreedor},obtenerUsuarios:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.cargando=!0,r.next=3,p.obtenerUsuarios();case 3:a=r.sent,e.usuarios=[],e.deudores=[],a.forEach((function(r){var a={id:r.id,nombre:r.data().nombre};e.usuarios.push(a),e.deudores.push(a)})),e.cargando=!1;case 8:case"end":return r.stop()}}),r)})))()}}}),H=G,Y=Object(g["a"])(H,M,q,!1,null,null,null),J=Y.exports,K=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-button",{staticClass:"is-success mb-5",attrs:{loading:e.cargando,"icon-right":"plus"},on:{click:function(r){return e.agregarDeuda()}}},[e._v("Nueva")]),a("b-field",{attrs:{label:"Mostrar deudas donde el acreedor sea"}},[a("b-select",{attrs:{placeholder:"Selecciona un usuario"},nativeOn:{change:function(r){return e.obtenerDeudasSegunFiltros()}},model:{value:e.filtroDeudasAcreedor,callback:function(r){e.filtroDeudasAcreedor=r},expression:"filtroDeudasAcreedor"}},e._l(e.usuarios,(function(r){return a("option",{key:r.id,domProps:{value:r}},[e._v(" "+e._s(r.nombre)+" ")])})),0)],1),a("b-field",{attrs:{label:"Mostrar deudas donde el deudor sea"}},[a("b-select",{attrs:{placeholder:"Selecciona un usuario"},nativeOn:{change:function(r){return e.obtenerDeudasSegunFiltros()}},model:{value:e.filtroDeudasDeudor,callback:function(r){e.filtroDeudasDeudor=r},expression:"filtroDeudasDeudor"}},e._l(e.usuarios,(function(r){return a("option",{key:r.id,domProps:{value:r}},[e._v(" "+e._s(r.nombre)+" ")])})),0)],1),a("b-field",{attrs:{label:"Estado de liquidación"}},[a("b-select",{attrs:{placeholder:"Selecciona una opción"},nativeOn:{change:function(r){return e.obtenerDeudasSegunFiltros()}},model:{value:e.filtroEliminadas,callback:function(r){e.filtroEliminadas=r},expression:"filtroEliminadas"}},e._l(e.filtrosEliminadas,(function(r){return a("option",{key:r.id,domProps:{value:r}},[e._v(" "+e._s(r)+" ")])})),0)],1),a("hr"),a("table",{staticClass:"table is-bordered"},[e._m(0),a("tbody",e._l(e.totalesSimples(),(function(r,t){return a("tr",{key:t},[a("td",[e._v(" "+e._s(r.deudor.nombre)+" le debe "+e._s(e._f("dinero")(r.debe))+" a "+e._s(r.acreedor.nombre)+"; "+e._s(r.acreedor.nombre)+" le debe "+e._s(e._f("dinero")(r.leDeben))+" a "+e._s(r.deudor.nombre)+" ")]),a("td",[0===r.diferencia?a("p",[e._v("Ya está liquidado")]):r.diferencia>0?a("p",[e._v(" "+e._s(r.acreedor.nombre)+" le da "+e._s(e._f("dinero")(r.leDeben-r.debe))+" a "+e._s(r.deudor.nombre)+" ")]):r.diferencia<0?a("p",[e._v(" "+e._s(r.deudor.nombre)+" le da "+e._s(e._f("dinero")(r.debe-r.leDeben))+" a "+e._s(r.acreedor.nombre)+" ")]):e._e()])])})),0)]),a("b-table",{attrs:{data:e.deudas,loading:e.cargando,"mobile-cards":!0,hoverable:""},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div",{staticClass:"has-text-centered"},[e._v("No hay registros")])]},proxy:!0}])},[a("b-table-column",{attrs:{field:"acreedor",label:"Acreedor"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e.detallesDeUsuario(r.row.acreedor).nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"fecha",label:"Fecha"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e._f("fecha")(r.row.fecha))+" ")]}}])}),a("b-table-column",{attrs:{field:"descripcion",label:"Descripción"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(r.row.descripcion)+" ")]}}])}),a("b-table-column",{attrs:{field:"monto",label:"Monto"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e._f("dinero")(r.row.monto))+" ")]}}])}),a("b-table-column",{attrs:{field:"deudores",label:"Deudores"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("ul",e._l(r.row.deudores,(function(t){return a("li",{key:t.id},[a("b-checkbox",{attrs:{disabled:r.row.eliminada||e.usuarioAutenticado.id!==r.row.acreedor||t.pagado},nativeOn:{change:function(a){return e.actualizarDeuda(r.row)}},model:{value:t.pagado,callback:function(r){e.$set(t,"pagado",r)},expression:"deudor.pagado"}},[e._v(e._s(e.detallesDeUsuario(t.id).nombre)+" "+e._s(e._f("dinero")(e.montoIndividual(r.row))))]),a("b-tag",{directives:[{name:"show",rawName:"v-show",value:t.pagado,expression:"deudor.pagado"}],attrs:{type:"is-success"}},[e._v("Pagado")])],1)})),0)]}}])}),a("b-table-column",{attrs:{field:"restante",label:"Restante"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e._f("dinero")(e.restante(r.row)))+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Liquidar"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!r.row.eliminada,expression:"!props.row.eliminada"}],attrs:{disabled:e.usuarioAutenticado.id!==r.row.acreedor,type:"is-info"},on:{click:function(a){return e.eliminar(r.row)}}},[a("b-icon",{attrs:{icon:"check"}})],1),a("b-tag",{directives:[{name:"show",rawName:"v-show",value:r.row.eliminada,expression:"props.row.eliminada"}],attrs:{type:"is-success"}},[e._v("Liquidada")])]}}])})],1)],1)])},Q=[function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("thead",[a("tr",[a("th",[e._v("Estado")]),a("th",[e._v("Se liquida si")])])])}],X=a("3835"),W=(a("99af"),a("c740"),a("4fad"),a("b64b"),"Liquidadas y pendientes"),Z="Solo liquidadas",ee="Solo pendientes",re={data:function(){return{usuarioAutenticado:{},filtrosEliminadas:[W,Z,ee],filtroEliminadas:null,funcionParaDesuscribir:null,coleccionDeudas:null,bd:null,cargando:!1,deudas:[],deudasFiltradas:[],diccionarioUsuarios:{},usuarios:[],referenciaListaDeudas:null,ID_TODOS_LOS_USUARIOS:"ID_TODOS_LOS_USUARIOS",filtroDeudasAcreedor:{},filtroDeudasDeudor:{}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.usuarioAutenticado=p.obtenerUsuarioAutenticado(),e.filtroEliminadas=ee,r.next=4,e.obtenerUsuarios();case 4:return r.next=6,p.obtenerColeccionDeudas();case 6:return e.coleccionDeudas=r.sent,r.next=9,p.obtener();case 9:e.bd=r.sent,e.obtenerDeudasSegunFiltros();case 11:case"end":return r.stop()}}),r)})))()},methods:{obtenerDeudasSegunFiltros:function(){this.deudas=[],"function"===typeof this.funcionParaDesuscribir&&this.funcionParaDesuscribir();var e=[Object(c["k"])("fecha","desc")];this.filtroEliminadas===Z?e.push(Object(c["n"])("eliminada","==",!0)):this.filtroEliminadas===ee&&e.push(Object(c["n"])("eliminada","==",!1)),this.filtroDeudasAcreedor.id!==this.ID_TODOS_LOS_USUARIOS&&e.push(Object(c["n"])("acreedor","==",this.filtroDeudasAcreedor.id)),this.filtroDeudasDeudor.id!==this.ID_TODOS_LOS_USUARIOS&&e.push(Object(c["n"])("idDeudores","array-contains",this.filtroDeudasDeudor.id));var r=c["l"].apply(void 0,[this.coleccionDeudas].concat(e));this.funcionParaDesuscribir=Object(c["j"])(r,this.manejarEventoSnapshot)},manejarEventoSnapshot:function(e){var r=this;this.cargando=!0,e.docChanges().forEach((function(e){var a=e.doc.data(),t=e.doc.id;if("added"===e.type&&(a.id=t,r.deudas.push(a)),"modified"===e.type){var n=r.indiceDeDeuda(t);-1!==n&&r.$set(r.deudas,n,a)}if("removed"===e.type){var o=r.indiceDeDeuda(t);-1!==o&&r.deudas.splice(o,1)}})),this.cargando=!1},eliminar:function(e){var r=this;this.$buefy.dialog.confirm({message:"¿Liquidar deuda? Esto no se puede deshacer",cancelText:"Cancelar",confirmText:"Sí, liquidar",onConfirm:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.cargando=!0,e.eliminada=!0,Object(c["m"])(Object(c["d"])(r.bd,"deudas",e.id),e),r.$buefy.toast.open("Liquidada"),r.cargando=!1;case 5:case"end":return a.stop()}}),a)})));function t(){return a.apply(this,arguments)}return t}()})},indiceDeDeuda:function(e){return this.deudas.findIndex((function(r){return r.id===e}))},actualizarDeuda:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:Object(c["m"])(Object(c["d"])(r.bd,"deudas",e.id),e);case 1:case"end":return a.stop()}}),a)})))()},totalesSimples:function(){var e,r={},a=Object(V["a"])(this.deudas);try{for(a.s();!(e=a.n()).done;){var t=e.value;r[t.acreedor]||(r[t.acreedor]={acreedor:this.detallesDeUsuario(t.acreedor),deudores:{}});var n,o=Object(V["a"])(t.deudores);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(t.acreedor!==i.id&&(r[t.acreedor]["deudores"][i.id]||(r[t.acreedor]["deudores"][i.id]={deudor:this.detallesDeUsuario(i.id),debe:0,leDeben:0,diferencia:0}),r[i.id]||(r[i.id]={acreedor:this.detallesDeUsuario(i.id),deudores:{}}),r[i.id]["deudores"][t.acreedor]||(r[i.id]["deudores"][t.acreedor]={deudor:this.detallesDeUsuario(t.acreedor),debe:0,leDeben:0,diferencia:0}),!i.pagado&&!t.eliminada)){var s=this.montoIndividual(t);r[i.id]["deudores"][t.acreedor].leDeben+=s,r[i.id]["deudores"][t.acreedor].diferencia+=s,r[t.acreedor]["deudores"][i.id].debe+=s,r[t.acreedor]["deudores"][i.id].diferencia-=s}}}catch(E){o.e(E)}finally{o.f()}}}catch(E){a.e(E)}finally{a.f()}for(var u=0,c=Object.entries(r);u<c.length;u++)for(var d=Object(X["a"])(c[u],2),l=d[0],b=d[1],f=0,p=Object.entries(b.deudores);f<p.length;f++){var m=Object(X["a"])(p[f],1),v=m[0];r[l].deudores[v]&&r[v].deudores[l]&&delete r[v].deudores[l]}for(var h=0,g=Object.entries(r);h<g.length;h++){var _=Object(X["a"])(g[h],1),w=_[0];0===Object.keys(r[w].deudores).length&&delete r[w]}for(var y=[],D=0,O=Object.entries(r);D<O.length;D++)for(var x=Object(X["a"])(O[D],2),S=x[1],U=0,k=Object.entries(S.deudores);U<k.length;U++){var j=Object(X["a"])(k[U],2),A=j[1];y.push({acreedor:S.acreedor,deudor:A.deudor,debe:A.debe,leDeben:A.leDeben,diferencia:A.diferencia})}return y},desglose:function(){var e,r={},a=Object(V["a"])(this.deudas);try{for(a.s();!(e=a.n()).done;){var t,n=e.value,o=Object(V["a"])(n.deudores);try{for(o.s();!(t=o.n()).done;){var i=t.value;r[i.id]||(r[i.id]={deudor:i,monto:0}),i.pagado||n.eliminada||(r[i.id].monto+=this.montoIndividual(n))}}catch(s){o.e(s)}finally{o.f()}}}catch(s){a.e(s)}finally{a.f()}return r},totalDeuda:function(){var e,r=0,a=Object(V["a"])(this.deudas);try{for(a.s();!(e=a.n()).done;){var t=e.value;t.eliminada||(r+=this.restante(t))}}catch(n){a.e(n)}finally{a.f()}return r},montoIndividual:function(e){return e.eliminada||e.deudores.length<=0?0:e.monto/e.deudores.length},restante:function(e){if(e.eliminada)return 0;var r,a=0,t=Object(V["a"])(e.deudores);try{for(t.s();!(r=t.n()).done;){var n=r.value;n.pagado||a++}}catch(o){t.e(o)}finally{t.f()}return this.montoIndividual(e)*a},detallesDeUsuario:function(e){return this.diccionarioUsuarios[e]||{}},agregarDeuda:function(){this.$router.push({name:"AgregarDeuda"})},obtenerUsuarios:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.cargando=!0,r.next=3,p.obtenerUsuarios();case 3:a=r.sent,e.diccionarioUsuarios={},e.usuarios=[{id:e.ID_TODOS_LOS_USUARIOS,nombre:"-- Todos --"}],e.filtroDeudasDeudor=e.usuarios[0],e.filtroDeudasAcreedor=e.usuarios[0],a.forEach((function(r){e.diccionarioUsuarios[r.id]=r.data();var a={id:r.id,nombre:r.data().nombre};e.usuarios.push(a)})),e.cargando=!1;case 10:case"end":return r.stop()}}),r)})))()}}},ae=re,te=Object(g["a"])(ae,K,Q,!1,null,null,null),ne=te.exports,oe=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},ie=[function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("section",{staticClass:"hero is-link"},[a("div",{staticClass:"hero-body"},[a("p",{staticClass:"title"},[e._v(" Creado por "),a("a",{staticClass:"has-text-warning",attrs:{href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")])]),a("br"),a("div",{staticClass:"title"},[e._v("Más software gratuito")]),a("p",[e._v(" Puede visitar "),a("a",{staticClass:"has-text-warning",attrs:{href:"https://parzibyte.me/blog"}},[e._v("mi blog")]),e._v(" para ver más software. También le invito a "),a("a",{staticClass:"has-text-warning",attrs:{href:"https://parzibyte.me/blog/sigueme"}},[e._v("seguirme")]),e._v(" para mantenerse al tanto ")])])]),a("h2",{staticClass:"is-size-2"},[e._v("Créditos de los iconos")]),a("div",[e._v(" Icons made by "),a("a",{attrs:{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons"}},[e._v("Smashicons")]),e._v(" from "),a("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[e._v("www.flaticon.com")])])])])])}],se={},ue=Object(g["a"])(se,oe,ie,!1,null,null,null),ce=ue.exports,de=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Usuario"}},[a("b-input",{attrs:{type:"text",placeholder:"Tu usuario",loading:e.cargando},model:{value:e.usuario,callback:function(r){e.usuario=r},expression:"usuario"}})],1),a("b-field",{attrs:{label:"Contraseña"}},[a("b-input",{attrs:{type:"password",placeholder:"Tu contraseña",loading:e.cargando},model:{value:e.palabraSecreta,callback:function(r){e.palabraSecreta=r},expression:"palabraSecreta"}})],1),a("b-button",{staticClass:"is-success",attrs:{loading:e.cargando},on:{click:function(r){return e.iniciarSesion()}}},[e._v("Iniciar sesión")])],1)])},le=[],be=a("279c"),fe={data:function(){return{usuario:"",palabraSecreta:"",cargando:!1,coleccionUsuarios:null}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=p.obtenerUsuarioAutenticado(),!a){r.next=4;break}return e.$router.push({name:"ListaDeDeudas"}),r.abrupt("return");case 4:return r.next=6,p.obtenerColeccionUsuarios();case 6:e.coleccionUsuarios=r.sent;case 7:case"end":return r.stop()}}),r)})))()},methods:{iniciarSesion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,t,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.usuario&&e.palabraSecreta){r.next=2;break}return r.abrupt("return");case 2:return e.cargando=!0,a=Object(c["l"])(e.coleccionUsuarios,Object(c["n"])("nombre","==",e.usuario),Object(c["i"])(1)),r.next=6,Object(c["g"])(a);case 6:if(t=r.sent,!t.empty){r.next=11;break}return e.$buefy.toast.open("Usuario o contraseña incorrectos"),e.cargando=!1,r.abrupt("return");case 11:return n=t.docs[0].data(),n.id=t.docs[0].id,o=n.palabraSecreta,r.next=16,be.compare(e.palabraSecreta,o);case 16:i=r.sent,i?(p.guardarUsuarioAutenticado(n),m.$emit("usuarioAutenticado",n),e.$buefy.toast.open("Bienvenido"),e.$router.push({name:"ListaDeDeudas"})):e.$buefy.toast.open("Usuario o contraseña incorrectos"),e.cargando=!1;case 19:case"end":return r.stop()}}),r)})))()}}},pe=fe,me=Object(g["a"])(pe,de,le,!1,null,null,null),ve=me.exports;t["a"].use(D["a"]);var he=new D["a"]({routes:[{path:"/",redirect:"/deudas"},{path:"/usuarios",name:"Usuarios",component:j},{path:"/agregar-usuario",name:"AgregarUsuario",component:$},{path:"/editar-usuario/:id",name:"EditarUsuario",component:F},{path:"/agregar-deuda",name:"AgregarDeuda",component:J},{path:"/deudas",name:"ListaDeDeudas",component:ne},{path:"/acerca-de",name:"AcercaDe",component:ce},{path:"/login",name:"Login",component:ve}]});he.beforeEach((function(e,r,a){p.obtenerUsuarioAutenticado()||"Login"===e.name?a():a({name:"Login"})}));var ge=he;t["a"].use(y["a"]),t["a"].config.productionTip=!1;var _e=new Intl.NumberFormat("en",{style:"currency",currency:"MXN"}),we=new Intl.DateTimeFormat("es-MX",{dateStyle:"medium",timeStyle:"medium"});t["a"].filter("dinero",(function(e){return _e.format(e)})),t["a"].filter("fecha",(function(e){return we.format(new Date(e))})),new t["a"]({render:function(e){return e(w)},router:ge}).$mount("#app")},6:function(e,r){},7:function(e,r){},8:function(e,r){},9:function(e,r){}});